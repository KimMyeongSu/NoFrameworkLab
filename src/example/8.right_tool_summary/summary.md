# Redux 상태 구조 설계 결정문서 (ADR-001)

## 1. 개요

이 문서는 Redux 상태 구조를 설계하는데 있어 핵심적인 결정사항을 다룹니다.

## 2. 현재 상황

### 기술 스택

- React
- Redux
- Redux-Saga
- Cordova 애플리케이션 환경

### 당면 과제

- 제품 책임자의 요구사항: Electron 환경에서의 애플리케이션 실행 가능성 검토
- 현재 상태 관리의 문제점: 도메인 데이터와 UI 관련 데이터가 혼재되어 있음
- 이식성 확보의 어려움: 현재 구조로는 다른 환경으로의 이식이 제한적임

## 3. 핵심 결정사항

### 상태 구조의 분리

Redux 상태를 다음과 같이 두 개의 주요 분기로 분리합니다:

1. **Core 분기**

   - 애플리케이션의 핵심 도메인 데이터 저장
   - 비즈니스 로직과 관련된 상태 관리
   - 향후 독립적인 패키지로 분리 가능한 구조

2. **UI 분기**
   - UI 특화 데이터 저장
   - 포함되는 데이터 예시:
     - 폼 입력값
     - 메뉴 상태 (열림/닫힘)
     - 네비게이션 관련 정보
     - 화면 표시 상태

### 의존성 규칙

- UI 분기 → Core 분기: 허용됨
  - UI 컴포넌트는 Core의 데이터, 비동기 처리 로직 등을 자유롭게 사용 가능
- Core 분기 → UI 분기: 금지됨
  - Core 로직은 UI 관련 데이터에 직접 접근 불가

## 4. 적용 현황

- 상태: 승인됨
- 적용 단계: 진행 중

## 5. 기대 효과

### 장점

1. **명확한 코드 구조**

   - 상태 관리 책임이 명확히 구분됨
   - 버그 발생 시 문제 영역 특정이 용이함

2. **향상된 유지보수성**

   - 도메인 로직과 UI 로직의 명확한 분리
   - 코드 변경의 영향 범위 예측 가능

3. **향상된 확장성**
   - Core 부분의 독립적인 패키지화 가능
   - 다양한 UI 환경(Electron 등)에서의 재사용성 확보

### 고려사항

1. **추가 개발 작업**

   - Redux-Saga 비동기 처리 로직의 래퍼 구현 필요
   - 기존 코드의 마이그레이션 작업 필요

2. **성능 고려사항**
   - 상태 분리로 인한 추가적인 래퍼 계층 발생
   - 상태 동기화 관리의 복잡성 증가 가능성

## 6. 구현 가이드라인

### 코드 구성

```typescript
// 상태 구조 예시
interface RootState {
  core: {
    // 도메인 데이터
    entities: {};
    business: {};
    // ... 기타 도메인 관련 상태
  };
  ui: {
    forms: {};
    navigation: {};
    layout: {};
    // ... 기타 UI 관련 상태
  };
}
```

### Redux-Saga 비동기 처리 구현 예시

```typescript
// UI의 비동기 처리에서 Core 비동기 처리 사용 예시
function* handleUIAction() {
  // Core의 비동기 처리 로직 호출 가능
  yield call(handleCoreLogic);
}

// Core의 비동기 처리는 독립적으로 실행
function* handleCoreLogic() {
  // UI 관련 상태나 로직에 직접 의존하지 않음
}
```
